include ../mixins/sub-menu.pug
header.header  
    .container  
        nav.navbar.navbar-expand-md  
            a.navbar-brand.me-2(href="/")  
                img(src="https://res.cloudinary.com/daq721xar/image/upload/v1735363338/bnxtcu0ma1ystkbamkds.svg", alt="Logo", class="img-fluid" width="100px" height="200px")  
            
            button.navbar-toggler(type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation")  
                span.navbar-toggler-icon  
            
            #navbarNav.collapse.navbar-collapse  
                form.d-flex.mx-4.flex-grow-1.max-w-50(
                    action="/search" 
                    method="GET"
                )
                    .input-group
                        input.form-control(
                            type="text" 
                            placeholder="Search products..."
                            value=keyword
                            name="keyword"
                        )
                        button.btn.btn-primary(type="submit" class="btn btn-primary")
                            i.fas.fa-search.mr-2        
                
                ul.navbar-nav.ms-auto
                    li.nav-item
                        a.nav-link(href="/") Home  
                    li.nav-item.sub-menu
                        -const patchProduct = "/products";
                        a.nav-link(href=`${patchProduct}`) Products 
                        +sub-menu(layoutProductsCategory, patchProduct) 
                    li.nav-item
                        a.nav-link.position-relative(href="/cart")
                            i.fas.fa-shopping-cart.fs-5
                            span.position-absolute.top-0.start-100.translate-middle.badge.rounded-pill.bg-danger #{miniCart ? miniCart.products.length : 0}
    style.
        /* sub-menu styling */  
        .sub-menu {  
            position: relative;  
            z-index: 999;  
        }  

        .sub-menu ul {  
            position: absolute;  
            right: 0;  
            top: 100%;  
            list-style: none;  
            padding: 8px 0;  
            margin: 0;  
            background: #ffffff;  
            min-width: 220px;  
            display: none;  
            border-radius: 8px;  
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);  
            animation: fadeIn 0.3s ease;  
        }  

        .sub-menu ul li {  
            padding: 0;  
            position: relative;  
        }  

        .sub-menu ul li a {  
            padding: 12px 20px;  
            color: #333;  
            display: block;  
            text-decoration: none;  
            font-size: 14px;  
            transition: all 0.3s ease;  
            white-space: nowrap;  
        }  

        .sub-menu ul li:hover > a {  
            background: #f8f9fa;  
            color: #007bff;  
            padding-left: 25px;  
        }  

        .sub-menu:hover > ul {  
            display: block;  
        }  

        .sub-menu ul li ul {  
            right: 100%;  
            top: 0;  
        }  

        .sub-menu ul li:hover > ul {  
            display: block;  
        }  

        /* Thêm mũi tên cho các mục có submenu */  
        .sub-menu ul li:has(> ul) > a::after {  
            content: '›';  
            position: absolute;  
            right: 15px;  
            transform: rotate(180deg);  
        }  

        /* Animation cho menu */  
        @keyframes fadeIn {  
            from {  
                opacity: 0;  
                transform: translateY(10px);  
            }  
            to {  
                opacity: 1;  
                transform: translateY(0);  
            }  
        }  

        /* Thêm separator giữa các mục menu */  
        .sub-menu ul li:not(:last-child) {  
            border-bottom: 1px solid #eee;  
        }  

        /* Hover effect cho menu chính */  
        .sub-menu > a.nav-link {  
            position: relative;  
        }  

        .sub-menu > a.nav-link::after {  
            content: '▾';  
            margin-left: 5px;  
            display: inline-block;  
            transition: transform 0.3s ease;  
        }  

        .sub-menu:hover > a.nav-link::after {  
            transform: rotate(180deg);  
        }  

        span {
            cursor: pointer;
        }