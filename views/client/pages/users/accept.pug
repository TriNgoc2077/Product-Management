extends ../../layouts/default.pug
include ../../mixins/box-head.pug

block main 
    include ../../partials/list-btn-users.pug

    .container.py-4
        .row.mb-4
            .col-12
                +box-head("List request received")

        .row.g-4(data-user-accept=user.id)
            each user in users
                .col-12.col-md-4(user-id=user.id)
                    div(class="box-user card h-100 shadow-sm")
                        .card-body.p-3
                            .d-flex.align-items-center.position-relative
                                .inner-avatar.position-relative.me-3
                                    img.rounded-circle.border.border-2.border-light(
                                        src=user.avatar
                                        alt="avatar"
                                        style="width: 80px; height: 80px; object-fit: cover;"
                                    )
                                
                                .inner-info.flex-grow-1
                                    .inner-name.fw-semibold.mb-2.fs-5 #{user.fullName}
                                    .inner-buttons.d-flex.gap-2
                                        button(
                                            class="btn btn-sm btn-primary"
                                            button-accept-friend=user.id
                                        ) Accept
                                        button(
                                            class="btn btn-sm btn-secondary"
                                            button-refuse-friend=user.id
                                        ) Refuse
                                        button(
                                            class="btn btn-sm btn-secondary d-none"
                                            button-deleted-friend=user.id
                                            disabled
                                        ) Deleted
                                        button(
                                            class="btn btn-sm btn-primary d-none"
                                            button-accepted-friend=user.id
                                            disabled
                                        ) Accepted
    
    block users
        script(type="module", src="/js/users.js") 

    style.
        .box-user [button-deleted-friend],
        .box-user [button-accepted-friend] {
            display: none !important;
        }

        .box-user.refuse [button-accept-friend],
        .box-user.refuse [button-refuse-friend] {
            display: none !important;
        }
        .box-user.refuse [button-deleted-friend] {
            display: inline-block !important;
        }

        .box-user.accepted [button-accept-friend],
        .box-user.accepted [button-refuse-friend] {
            display: none !important;
        }
        .box-user.accepted [button-accepted-friend] {
            display: inline-block !important;
        }